rp_archive_fp_resetValues(),default_sort=floorplans_data.selected_sort;var google_tag_events=0;function rp_archive_fp_constructPage(){params=new URLSearchParams(location.search),filters=[...params.entries()],floorplans=all_floorplans_data.all_floorplans,all_floorplans_bed_types=rp_archive_fp_getUniqueBedTypes(all_floorplans_data.all_floorplans),all_floorplans_feature_types=rp_archive_fp_getUniqueFeatureTypes(all_floorplans_data.all_floorplans),floorplans=rp_archive_fp_filterFloorplans(floorplans),rp_archive_fp_makeAllCards(floorplans),rp_archive_fp_constructBedroomsFilter(all_floorplans_bed_types),rp_archive_fp_constructFeaturesFilter(all_floorplans_feature_types),price=params.get("selected_price_range"),price&&price_range_slider.noUiSlider.updateOptions({start:price[0]})}function rp_archive_fp_resetFilters(){history.replaceState({},document.title,location.origin+location.pathname),rp_archive_fp_resetValues(),params=new URLSearchParams(location.search),filters=[...params.entries()],price_range_slider.noUiSlider.updateOptions({start:floorplans_data.rent_range.max}),document.getElementById("floorplans_available_filter").value="",rp_archive_fp_makeAllCards(floorplans),rp_archive_fp_constructBedroomsFilter(all_floorplans_bed_types),rp_archive_fp_constructFeaturesFilter(all_floorplans_feature_types)}function rp_archive_fp_applyFilters(){rp_archive_fp_resetValues(),paramStr="",w=document.getElementsByName("selected_floorplans_beds"),x=document.getElementsByName("selected_floorplans_features"),y=document.getElementById("floorplans_available_filter"),z=document.getElementById("rp-archive-fp-price-range").innerText;for(var e=w.length-1;e>=0;e--)1==w[e].checked&&(paramStr+="selected_floorplans_beds="+w[e].value+"&");for(e=x.length-1;e>=0;e--)1==x[e].checked&&(paramStr+="selected_floorplans_features="+x[e].value+"&");""!=y.options[y.selectedIndex].value&&(paramStr+="floorplans_available_by="+y.options[y.selectedIndex].value+"&"),z!=floorplans_data.rent_range.max&&(paramStr+="selected_price_range="+z,price_range_slider.noUiSlider.updateOptions({start:z})),full_address=location.origin+location.pathname,paramStr.length>1&&(full_address=location.origin+location.pathname+"?"+paramStr),history.replaceState({},document.title,full_address),params=new URLSearchParams(location.search),filters=[...params.entries()],console.log(filters),floorplans=rp_archive_fp_filterFloorplans(floorplans),rp_archive_fp_makeAllCards(floorplans),rp_archive_fp_constructBedroomsFilter(all_floorplans_bed_types),rp_archive_fp_constructFeaturesFilter(all_floorplans_feature_types)}function rp_archive_fp_sortFloorplans(e){switch(default_sort&&(document.getElementById("floorplan_sort").value=default_sort,default_sort=!1),selected_sort=document.getElementById("floorplan_sort").value,selected_sort){case"avail:asc":e.sort((function(e,t){return e.fpMinRent-t.fpMinRent})),e.sort((function(e,t){return t.fpAvailUnitCount-e.fpAvailUnitCount}));break;case"rent:asc":e.sort((function(e,t){return e.fpMinRent-t.fpMinRent}));break;case"rent:desc":e.sort((function(e,t){return t.fpMinRent-e.fpMinRent}));break;case"sqft:asc":e.sort((function(e,t){return e.sqft-t.sqft}));break;case"sqft:desc":e.sort((function(e,t){return t.sqft-e.sqft}));break;case"beds:asc":e.sort((function(e,t){return e.fpMinRent-t.fpMinRent})),e.sort((function(e,t){return e.bedCount-t.bedCount}))}return e}function rp_archive_fp_constructBedroomsFilter(){var e=all_floorplans_bed_types;bedroomChoices=params.getAll("selected_floorplans_beds"),e.sort((function(e,t){return t-e})),bedStr="";for(var t=e.length-1;t>=0;t--)checked="",bedroomChoices.includes(e[t])&&(checked=" checked"),paragraph="<p>","checked"==checked&&(paragraph="<p class='rp-is-checked'>"),0==e[t]?bedStr+=paragraph+"<label><input type='checkbox' class='rp-input rp-bed-filter' name='selected_floorplans_beds' value='"+e[t]+"'"+checked+">Studio</label></p>":bedStr+=paragraph+"<label><input type='checkbox' class='rp-input rp-bed-filter' name='selected_floorplans_beds' value='"+e[t]+"'"+checked+"> "+e[t]+" Bedroom</label></p>";bedStr+="<div class='clearfix'></div>",document.getElementById("rp-archive-fp-bed-filter").innerHTML=bedStr,bedroom_checkboxes=document.getElementsByClassName("rp-input rp-bed-filter");for(t=0;t<bedroom_checkboxes.length;t++)bedroom_checkboxes[t].onclick=function(){this.parentNode.parentNode.classList.toggle("rp-is-checked")}}function rp_archive_fp_constructFeaturesFilter(){var e=all_floorplans_feature_types;featureChoices=params.getAll("selected_floorplans_features"),0==e.length&&(document.getElementById("rp-archive-fp-feature-filter-section").style.display="none"),e.sort((function(e,t){return t-e})),featureStr="";for(var t=e.length-1;t>=0;t--)checked="",featureChoices.includes(e[t])&&(checked="checked"),paragraph="<p>","checked"==checked&&(paragraph="<p class='rp-is-checked'>"),featureStr+=paragraph+"<label><input type='checkbox' class='rp-input rp-feature-filter' name='selected_floorplans_features' value='"+e[t]+"' "+checked+"> "+e[t]+"</label></p>";featureStr+="<div class='clearfix'></div>",document.getElementById("rp-archive-fp-feature-filter").innerHTML=featureStr,feature_checkboxes=document.getElementsByClassName("rp-input rp-feature-filter");for(t=0;t<feature_checkboxes.length;t++)feature_checkboxes[t].onclick=function(){this.parentNode.parentNode.classList.toggle("rp-is-checked")}}function rp_archive_fp_constructPriceSlider(){var e=document.getElementById("rp-archive-fp-price-range"),t=document.getElementById("floorplans_max_rent").value;if("true"==floorplans_data.disable_pricing&&(document.getElementById("filter-module-section").style.display="none"),t)var r=t;else r=floorplans_data.rent_range.max;return noUiSlider.create(e,{start:r,connect:[!0,!1],tooltips:!0,step:10,range:{min:10*Math.ceil(Number(floorplans_data.rent_range.min)/10),max:10*Math.ceil(Number(floorplans_data.rent_range.max)/10)},format:{to:function(e){return 10*Math.floor(Number(e)/10)},from:function(e){return e.replace(",-","")}}}),e.noUiSlider.on("update",(function(e,r){t.value=e})),e}function rp_archive_fp_getUniqueBedTypes(e){for(var t=[],r=e.length-1;r>=0;r--)bed_type=e[r].bedCount,void 0!==bed_type&&0!=bed_type.length&&-1==t.indexOf(bed_type)&&t.push(bed_type);return t}function rp_archive_fp_getUniqueFeatureTypes(e){for(var t=[],r=e.length-1;r>=0;r--)if(feature_type=e[r].featureName,void 0!==feature_type&&0!=feature_type.length)for(var a=0;a<feature_type.length;a++)t.includes(feature_type[a])||t.push(feature_type[a]);return t=t.filter((function(e){return null!=e}))}function rp_archive_fp_filterFloorplans(e){return price=params.get("selected_price_range"),dateChangeString=params.get("floorplans_available_by"),bedroomChoices=params.getAll("selected_floorplans_beds"),featureChoices=params.getAll("selected_floorplans_features"),bedroomChoices.length>0&&(e=rp_archive_fp_filterOutBedrooms(e,bedroomChoices)),featureChoices.length>0&&(e=rp_archive_fp_filterOutFeatures(e,featureChoices)),price&&(e=rp_archive_fp_filterOutPrice(e,price)),dateChangeString&&(e=rp_archive_fp_filterOutDate(e,dateChangeString)),e}function rp_archive_fp_filterOutDate(e,t){selectedDate=new Date,"Next Two Weeks"==t&&selectedDate.setDate(selectedDate.getDate()+14),"Next Month"==t&&(selectedDate.setMonth(selectedDate.getMonth()+2),selectedDate.setDate(0)),"Next Two Months"==t&&(selectedDate.setMonth(selectedDate.getMonth()+3),selectedDate.setDate(0)),unit_day=new Date;for(var r=e.length-1;r>=0;r--){totalUnits=e[r].units.length;for(var a=totalUnits-1;a>=0;a--)unit_day.setTime(e[r].units[a].newDate),(unit_day.getTime()>selectedDate.getTime()||"1970-01-01"==e[r].units[a].is_available_on)&&e[r].units.splice([a],1);0==e[r].units.length?e.splice([r],1):"true"==floorplans_data.show_all_units?e[r].fpAvailUnitCountDisplay=totalUnits>1?totalUnits+" Apartments":totalUnits+" Apartment":floorplans_data.show_waitlist&&0==e[r].units.length?e[r].fpAvailUnitCountDisplay="Join Waitlist":e[r].fpAvailUnitCountDisplay=e[r].units.length+" Available"}return e}function rp_archive_fp_filterOutPrice(e,t){max=t;for(var r=e.length-1;r>=0;r--)e[r].fpMinRent>max&&e.splice([r],1);return e}function rp_archive_fp_filterOutBedrooms(e,t){for(var r=[],a=0;a<t.length;a++)for(var l=t[a],n=0;n<e.length;n++)e[n].bedCount.includes(l)&&r.push(e[n]);return e=r}function rp_archive_fp_filterOutFeatures(e,t){for(var r=[],a=0;a<t.length;a++)for(var l=t[a],n=0;n<e.length;n++)e[n].featureName.includes(l)&&!r.includes(e[n])&&r.push(e[n]);return e=r}function rp_archive_fp_makeAllCards(e){strVar="",e.length>0?(document.getElementById("rp-archive-fp-data").classList.remove("rp-no-results"),(e=rp_archive_fp_sortFloorplans(e)).forEach(rp_archive_fp_makeFpCard)):(document.getElementById("rp-archive-fp-data").classList.add("rp-no-results"),rp_archive_fp_makeNoFloorplansMessage()),document.getElementById("floorplans_count").innerHTML=e.length,document.getElementById("floorplan_cards").innerHTML=strVar,modelEventOpener=document.getElementsByClassName("open-fp-modal");for(var t=0;t<modelEventOpener.length;t++)modelEventOpener[t].addEventListener("click",(function(e){document.body.style.overflow="hidden",void 0!==e.target.parentNode&&null!=e.target.parentNode.dataset.floorplanId&&(document.getElementById(e.target.parentNode.dataset.floorplanId).style.display="block",document.getElementById("popup-background").style.display="block")}));"function"==typeof dynamicFpEventListeners&&dynamicFpEventListeners()}function rp_archive_fp_makeFpCard(e){if(floorplans_data.isShortcodeUsingPopup?linkto="<a><figure class='open-fp-modal' data-floorplan-id='"+e.ID+"'>":linkto="<a href="+e.post_url+"><figure>",e.matterportLink)var t="<div class='rp-archive-fp-card-icon'><i class='far fa-play-circle'></i></div>";else t="";if("true"==e.has_special)var r="<div class='rp-fp-has-special'><h6><span>&#x2605</span> Special</h6></div>";else r="";strVar+="<div class='is-rp-fp'>",strVar+=linkto,strVar+="         <img class='rp-lazy' src='' data-src="+e.fpImg.image+" alt='"+e.fpImg.alt+"' >",strVar+=r,strVar+="     </figure>",strVar+="     <footer class='rp-fp-details'>",strVar+="         <div class='rp-fp-title'><h4>"+e.post_title+"</h4>",strVar+=t,strVar+="         </div><p>"+e.displaySqft+"</p>",strVar+="         <p class='rp-starting-at'>",strVar+="             <span>"+e.displayRent+"</span>",strVar+="             <span class='rp-num-avail rp-primary-accent'>"+e.fpAvailUnitCountDisplay+"</span>",strVar+="         </p>",strVar+="     </footer>",strVar+="  </a>",strVar+="</div>"}function closeFPModals(){for(var e=0;e<fpModals.length;e++)fpModals[e].style.display="none";document.getElementById("popup-background").style.display="none",document.body.style.overflow="auto"}function openFPFormModal(){document.getElementById("gravityFormModal").style.display="block",document.getElementById("form-popup-background").style.display="block"}function closeFPFormModal(e){document.getElementById("gravityFormModal").style.display="none",document.getElementById("form-popup-background").style.display="none"}function openApplyPage(){radioButtons=document.getElementsByClassName("rp-radio-unit-number");for(var e=0;e<radioButtons.length;e++)radioButtons[e].checked&&window.open(radioButtons[e].value,"_blank")}function rp_archive_fp_makeNoFloorplansMessage(){strVar+="<div class='rp-no-results-wrapper'>",strVar+="<p class='rp-primary-accent'>No Apartments Found</p>",strVar+="<p>Please try another search or <a class='rp-primary-accent' href='"+location.origin+"/contact'>Contact Us</a>.</p>",strVar+="</div>"}function rp_archive_fp_resetValues(){all_floorplans_data=JSON.parse(all_floorplans_data_encoded),floorplans_data=all_floorplans_data.data,floorplans=all_floorplans_data.all_floorplans,all_floorplans_bed_types=rp_archive_fp_getUniqueBedTypes(all_floorplans_data.all_floorplans),all_floorplans_feature_types=rp_archive_fp_getUniqueFeatureTypes(all_floorplans_data.all_floorplans)}document.addEventListener("DOMContentLoaded",(function(){document.getElementById("floorplan_sort").onchange=function(){rp_archive_fp_makeAllCards(floorplans)},document.getElementById("reset_button").onclick=function(){rp_archive_fp_resetFilters()},document.getElementById("apply_filters_button").onclick=function(){rp_archive_fp_applyFilters()},1!=floorplans_data.rent_range.max&&floorplans_data.rent_range.max!=floorplans_data.rent_range.min&&(window.price_range_slider=rp_archive_fp_constructPriceSlider()),rp_archive_fp_constructPage(),document.getElementById("rp-archive-fp-toggle-filters").onclick=function(){this.classList.toggle("rp-is-open"),this.classList.toggle("rp-is-closed"),document.getElementById("rp-archive-fp-sidebar").classList.toggle("rp-is-open"),document.getElementById("rp-archive-fp-data").classList.toggle("rp-is-open"),this.classList.contains("rp-is-open")?this.innerText=" Hide Filters":this.innerText=" Show Filters"},document.getElementById("rp-archive-fp-open-mobile-open-filters").onclick=function(){document.getElementById("rp-archive-fp-sidebar").classList.toggle("rp-is-mobile-open")},fpModals=document.getElementsByClassName("unit-modal")}),!1);